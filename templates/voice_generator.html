{% extends "layout.html" %} {% block title %}Voice Generator - Genius AutoWriter{% endblock %} {%
block head %}
<script src="{{ url_for('static', filename='js/voice-generator.js') }}?v=1.8" defer></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/voice-generator.css') }}?v=1.8" />
{% endblock %} {% block content %}
<div class="min-h-screen py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8">
    <!-- Header -->
    <div class="voice-header">
      <h1
        class="text-3xl font-bold text-white uppercase tracking-wide"
        data-translate="Voice Content Generator"
      >
        Voice Content Generator
      </h1>
      <p class="text-red-500 mt-1" data-translate="Create content using voice input and images">
        Create content using voice input and images
      </p>
    </div>

    <!-- Voice Content Generation Form -->
    <div class="voice-form-container overflow-hidden">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-white" data-translate="Voice Content Generation">
            Voice Content Generation
          </h2>
          <div class="text-sm text-gray-300" data-translate="Record your voice and add images">
            Record your voice and add images
          </div>
        </div>
      </div>
      <div class="px-6 pb-6">
        <!-- Content Title Section -->
        <div class="mb-6">
          <label for="page-name" class="block text-sm font-medium text-white mb-2">
            <span data-translate="Content Title">Content Title</span> <span class="text-red-400">*</span>
          </label>
          <input
            type="text"
            id="page-name"
            required
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200"
            placeholder="Enter content title"
            data-placeholder="Enter content title"
          />
        </div>

        <!-- Purpose Section -->
        <div class="mb-6">
          <label for="voice-purpose" class="block text-sm font-medium text-white mb-2">
            <span data-translate="Purpose">Purpose</span> <span class="text-red-400">*</span>
          </label>
          <select
            id="voice-purpose"
            required
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
          >
            <option value="" disabled selected data-translate="Select the purpose">Select the purpose</option>
            <option value="informative" data-translate="Informative Content">Informative Content</option>
            <option value="engagement" data-translate="Audience Engagement">Audience Engagement</option>
            <option value="sales" data-translate="Product/Service Sales">Product/Service Sales</option>
            <option value="emotional" data-translate="Emotional Content">Emotional Content</option>
            <option value="announcement" data-translate="Event/Update Announcement">Event/Update Announcement</option>
            <option value="educational" data-translate="Educational Content">Educational Content</option>
            <option value="showcase" data-translate="Product Feature Showcase">Product Feature Showcase</option>
          </select>
        </div>

        <!-- Output Language & Content Length -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <label for="language" class="block text-sm font-medium text-white mb-2">
              <span data-translate="Output Language">Output Language</span><span class="required" style="color: #ef4444; margin-left: 0.25rem;">*</span>
            </label>
            <select
              id="language"
              class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
              required
            >
              <option value="" disabled selected data-translate="Select output language">Select output language</option>
              <option value="myanmar" data-translate="Myanmar (မြန်မာ)">Myanmar (မြန်မာ)</option>
              <option value="english" data-translate="English (အင်္ဂလိပ်)">English (အင်္ဂလိပ်)</option>
            </select>
          </div>
          <div>
            <label for="word-count" class="block text-sm font-medium text-white mb-2">
              <span data-translate="Content Length">Content Length</span><span class="required" style="color: #ef4444; margin-left: 0.25rem;">*</span>
            </label>
            <select
              id="word-count"
              class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
              required
            >
              <option value="" disabled selected data-translate="Select content length">Select content length</option>
              <option value="150" data-translate="Short">Short</option>
              <option value="300" data-translate="Medium">Medium</option>
              <option value="600" data-translate="Long">Long</option>
            </select>
          </div>
        </div>

        <!-- Image Upload Section -->
        <div class="form-field mb-6">
          <label class="block text-sm font-medium text-white mb-2">
            <span data-translate="Upload Image">Upload Image</span>
          </label>
          <div id="image-upload-area" class="image-upload-container" style="background-color: #000000; border: 2px dashed #4b5563; border-radius: 0.5rem; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.2s;" onclick="document.getElementById('image-upload').click()">
            <input type="file" id="image-upload" style="display: none;" accept="image/*" />
            <svg class="image-upload-icon" style="width: 48px; height: 48px; margin: 0 auto 1rem; color: #6b7280;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <p class="image-upload-text" style="color: #9ca3af; font-size: 0.875rem; margin-bottom: 0.25rem;">Drop your images here, or browse</p>
            <p class="image-upload-hint" style="color: #6b7280; font-size: 0.75rem;">Supports: JPG, JPEG2000, PNG</p>
          </div>

          <!-- Camera Modal -->
          <div id="camera-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
              <div class="bg-gray-800 p-6 rounded-xl max-w-lg w-full">
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-lg font-semibold text-white" data-translate="Take Photo">
                    Take Photo
                  </h3>
                  <button id="close-camera" class="text-gray-400 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"
                      ></path>
                    </svg>
                  </button>
                </div>
                <video id="camera-video" class="w-full rounded-lg mb-4" autoplay></video>
                <canvas id="camera-canvas" class="hidden"></canvas>
                <div class="flex space-x-4">
                  <button
                    id="capture-btn"
                    class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all duration-200"
                    data-translate="Capture"
                  >
                    Capture
                  </button>
                  <button
                    id="cancel-camera"
                    class="flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-200"
                    data-translate="Cancel"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Image Preview -->
          <div id="image-preview-container" style="display: none; margin-top: 1rem;">
            <div style="position: relative; display: inline-block; max-width: 220px;">
              <img id="image-preview" src="" alt="Preview" style="width: 100%; height: auto; border-radius: 0.5rem; border: 2px solid #e5e7eb;" />
              <button
                type="button"
                id="remove-image-btn"
                onclick="event.stopPropagation();"
                style="position: absolute; top: -8px; right: -8px; background: #ef4444; color: white; border: none; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2);"
                title="Remove image"
              >
                <svg xmlns="http://www.w3.org/2000/svg" style="width: 16px; height: 16px;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Voice Recording Section -->
        <div class="mb-6 p-6 bg-gray-800/50 rounded-xl border border-gray-600/30">
          <div class="flex items-center justify-between mb-4">
            <div>
              <h3 class="text-lg font-semibold text-white mb-2" data-translate="Voice Input">
                Voice Input
              </h3>
              <p
                class="text-sm text-gray-400"
                data-translate="Record your voice for content generation"
              >
                Record your voice for content generation
              </p>
            </div>
            <div class="flex items-center space-x-4">
              <button
                id="voice-record-btn"
                class="flex items-center space-x-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
              >
                <svg
                  id="mic-icon"
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
                  ></path>
                </svg>
                <span id="record-btn-text" data-translate="Start Recording">Start Recording</span>
              </button>
            </div>
          </div>

          <!-- Recording Status -->
          <div id="recording-status" class="hidden mb-4">
            <div class="flex items-center space-x-3 text-red-400">
              <div class="recording-pulse"></div>
              <span class="text-sm font-medium" data-translate="Recording...">Recording...</span>
              <span id="recording-timer" class="text-sm">00:00</span>
            </div>
          </div>

          <!-- Save Status -->
          <div
            id="save-status"
            class="hidden mb-4 p-3 bg-green-900/30 border border-green-600/30 rounded-lg"
          >
            <div class="flex items-center space-x-3 text-green-400">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              <span
                class="text-sm font-medium"
                data-translate="Voice recording saved successfully! Ready for content generation."
                >Voice recording saved successfully! Ready for content generation.</span
              >
            </div>
          </div>
        </div>

        <!-- Generate Button -->
        <div class="flex justify-center">
        <button
          id="generate-voice-content-btn"
          class="w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 mb-4 transition-all duration-200 flex items-center justify-center disabled:opacity-75 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          style="max-width: 700px;"
        >
          <svg
            class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden"
            id="generate-voice-spinner"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          <!-- Lucide Wand icon -->
          <svg id="generate-voice-wand-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>
            <path d="m14 7 3 3"/>
            <path d="M5 6v4"/>
            <path d="M19 14v4"/>
            <path d="M10 2v2"/>
            <path d="M7 8H3"/>
            <path d="M21 16h-4"/>
            <path d="M11 3H9"/>
          </svg>
          <span id="generate-voice-btn-text" data-translate="Generate Content"
            >Generate Content</span
          >
        </button>
        </div>
      </div>
    </div>

    <!-- Generated Content Section -->
    <div class="voice-form-container" style="position: relative; padding: 2rem;">
      <h2 class="text-2xl font-bold text-white mb-2" data-translate="Generated Content">
        Generated Content
      </h2>
      <p
        class="text-red-500 text-sm mb-6"
        data-translate="Review and edit your generated content here."
      >
        Review and edit your generated content here.
      </p>

      <div id="voice-generated-content-display" class="generated-content-area">
        <svg
          class="empty-state-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
          />
        </svg>
        <p class="empty-state-text" data-translate="Record your voice to generate content.">
          Record your voice to generate content.
        </p>
        <p class="empty-state-subtext" data-translate="Your content will appear here.">
          Your content will appear here.
        </p>
      </div>
      
      <!-- Loading Animation (inside content area) -->
      <div id="voice-loading-overlay" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); border-radius: 1rem; justify-content: center; align-items: center; flex-direction: column; z-index: 10;">
        <div class="loading-spinner-container">
          <div class="loading-spinner"></div>
          <div class="loading-spinner-ring"></div>
        </div>
        <p style="color: white; font-size: 1.125rem; font-weight: 600; margin-top: 2rem; text-align: center;" data-translate="Generating your content...">Generating your content...</p>
        <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.875rem; margin-top: 0.5rem; text-align: center;" data-translate="Please wait a moment">Please wait a moment</p>
      </div>

      <textarea
        id="voice-content-area"
        rows="10"
        style="
          display: none;
          width: 100%;
          padding: 1rem;
          background-color: #ffffff;
          color: #000000;
          border: 1px solid #d1d5db;
          border-radius: 0.5rem;
          margin-bottom: 1rem;
        "
        placeholder="Generated content will appear here..."
        data-placeholder="Generated content will appear here..."
      ></textarea>

      <!-- Save Content & Copy Buttons -->
      <div class="mt-6 flex gap-4 justify-center">
        <!-- Copy Button -->
        <button
          id="copy-voice-content-btn"
          class="copy-btn flex items-center justify-center space-x-2 px-6 py-3 bg-white border-2 border-red-500 rounded-2xl transition-all duration-200 font-medium w-[140px]"
          style="display: none;"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="copy-icon h-5 w-5 transition-colors duration-200 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="color: #ef4444;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>
          <span class="copy-text text-base transition-colors duration-200" data-translate="Copy" style="color: #ef4444;">Copy</span>
        </button>
        
        <!-- Save Content Button -->
        <button
          id="save-voice-content-btn"
          class="save-btn flex items-center justify-center space-x-2 px-6 py-3 bg-white border-2 border-red-500 rounded-2xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed w-[140px]"
          style="display: none;"
          disabled
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="save-icon h-5 w-5 transition-colors duration-200 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" style="color: #ef4444;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
          </svg>
          <span id="save-voice-btn-text" class="save-text text-base transition-colors duration-200" data-translate="Save" style="color: #ef4444;">Save</span>
        </button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
