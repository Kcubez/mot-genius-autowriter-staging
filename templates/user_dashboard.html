{% extends "layout.html" %} {% block title %}Dashboard - Genius AutoWriter{% endblock %} {% block
head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
<script>
  // Expose user type to JavaScript
  window.userType = "{{ current_user.user_type or 'normal' }}";
  window.isAdmin = "{{ 'true' if current_user.is_admin else 'false' }}" === 'true';
</script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}" defer></script>
{% endblock %} {% block content %}
<div class="min-h-screen py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8">
    <!-- Header -->
    <div class="dashboard-header">
      <div>
        <h1 class="dashboard-title">GENIUS AUTOWRITER</h1>
        <p class="dashboard-subtitle" data-translate="Content Creation">Content Creation</p>
      </div>
      <div class="dashboard-header-actions">
        <button
          id="change-api-key-btn"
          class="change-api-key-btn"
          type="button"
          data-current-key="{{ current_user.api_key or '' }}"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-key-icon lucide-key"
          >
            <path d="m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4" />
            <path d="m21 2-9.6 9.6" />
            <circle cx="7.5" cy="15.5" r="5.5" />
          </svg>
          <span data-translate="Change API Key">Change API Key</span>
        </button>
      </div>
    </div>

    <!-- Content Generation Form -->
    <div class="form-container">
      <h2 class="form-title" data-translate="Content Details Form">Content Details Form</h2>
      <p
        class="form-description"
        data-translate="Provide the details for the content you want to generate."
      >
        Provide the details for the content you want to generate.
      </p>
      <!-- Content Title -->
      <div class="form-field">
        <label for="page-name" class="form-label">
          <span data-translate="Content Title">Content Title</span><span class="required">*</span>
        </label>
        <input
          type="text"
          id="page-name"
          required
          class="form-input"
          placeholder="Enter content title"
          data-placeholder="Enter content title"
        />
      </div>
      <!-- Topic -->
      <div class="form-field">
        <label for="prompt" class="form-label">
          <span data-translate="Topic">Topic</span><span class="required">*</span>
        </label>
        <textarea
          id="prompt"
          required
          class="form-textarea"
          placeholder="Write the main topic or draft idea of your content here"
          data-placeholder="Write the main topic or draft idea of your content here"
        ></textarea>
      </div>
      <!-- Purpose and Target Audience -->
      <div class="form-grid-2">
        <div class="form-field">
          <label for="purpose" class="form-label">
            <span data-translate="Purpose">Purpose</span><span class="required">*</span>
          </label>
          <select
            id="purpose"
            required
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
          >
            <option value="" disabled selected data-translate="Select the purpose">
              Select the purpose
            </option>
            <option value="informative" data-translate="Informative Content">
              Informative Content
            </option>
            <option value="engagement" data-translate="Audience Engagement">
              Audience Engagement
            </option>
            <option value="sales" data-translate="Product/Service Sales">
              Product/Service Sales
            </option>
            <option value="emotional" data-translate="Emotional Content">Emotional Content</option>
            <option value="announcement" data-translate="Event/Update Announcement">
              Event/Update Announcement
            </option>
            <option value="educational" data-translate="Educational Content">
              Educational Content
            </option>
            <option value="showcase" data-translate="Product Feature Showcase">
              Product Feature Showcase
            </option>
          </select>
        </div>
        <div class="form-field">
          <label for="audience" class="form-label">
            <span data-translate="Target Audience">Target Audience</span
            ><span class="required">*</span>
          </label>
          <input
            type="text"
            id="audience"
            required
            class="form-input"
            placeholder="e.g. Young adults aged 20-30"
            data-placeholder="e.g. Young adults aged 20-30"
          />
        </div>
      </div>

      <!-- Writing Style / Tone, Content Length, Output Language -->
      <div class="form-grid-3">
        <div class="form-field">
          <label for="writing-style" class="form-label">
            <span data-translate="Writing Style / Tone">Writing Style / Tone</span
            ><span class="required">*</span>
          </label>
          <select
            id="writing-style"
            required
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
          >
            <option value="" disabled selected data-translate="Select the writing style or tone">
              Select the writing style or tone
            </option>
            <option value="promotional" data-translate="Promotional / Sales-Oriented Style">
              Promotional / Sales-Oriented Style
            </option>
            <option value="conversational" data-translate="Conversational / Interactive Style">
              Conversational / Interactive Style
            </option>
            <option value="informational" data-translate="Informational / Educational Style">
              Informational / Educational Style
            </option>
            <option value="storytelling" data-translate="Storytelling / Inspirational Style">
              Storytelling / Inspirational Style
            </option>
            <option value="casual" data-translate="Casual / Humorous Style">
              Casual / Humorous Style
            </option>
          </select>
        </div>
        <div class="form-field">
          <label for="word-count" class="form-label">
            <span data-translate="Content Length">Content Length</span
            ><span class="required">*</span>
          </label>
          <select
            id="word-count"
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
            required
          >
            <option value="" disabled selected data-translate="Select content length">
              Select content length
            </option>
            <option value="150" data-translate="Short">Short</option>
            <option value="300" data-translate="Medium">Medium</option>
            <option value="600" data-translate="Long">Long</option>
          </select>
        </div>
        <div class="form-field">
          <label for="language" class="form-label">
            <span data-translate="Output Language">Output Language</span
            ><span class="required">*</span>
          </label>
          <select
            id="language"
            class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-xl text-gray-900 focus:outline-none focus:border-red-500 hover:border-red-400 transition-colors duration-200 cursor-pointer"
            required
          >
            <option value="" data-translate="Select output language">Select output language</option>
            <option value="myanmar" data-translate="Myanmar (မြန်မာ)">Myanmar (မြန်မာ)</option>
            <option value="english" data-translate="English (အင်္ဂလိပ်)">
              English (အင်္ဂလိပ်)
            </option>
          </select>
        </div>
      </div>
      <!-- Upload Image Section -->
      <div class="form-field">
        <label class="form-label">
          <span data-translate="Upload Image">Upload Image</span>
        </label>
        <div
          id="image-upload-area"
          class="image-upload-container"
          onclick="document.getElementById('image-upload').click()"
        >
          <input type="file" id="image-upload" class="hidden-file-input" accept="image/*" />
          <svg
            class="image-upload-icon"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
            />
          </svg>
          <p class="image-upload-text">Drop your images here, or browse</p>
          <p class="image-upload-hint">Supports: JPG, JPEG2000, PNG</p>
        </div>
        <!-- Image Preview -->
        <div id="image-preview-container" style="display: none; margin-top: 1rem">
          <div style="position: relative; display: inline-block; max-width: 220px">
            <img
              id="image-preview"
              src=""
              alt="Preview"
              style="width: 100%; height: auto; border-radius: 0.5rem; border: 2px solid #e5e7eb"
            />
            <button
              type="button"
              id="remove-image-btn"
              onclick="event.stopPropagation()"
              style="
                position: absolute;
                top: -8px;
                right: -8px;
                background: #ef4444;
                color: white;
                border: none;
                border-radius: 50%;
                width: 28px;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
              "
              title="Remove image"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                style="width: 16px; height: 16px"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Hashtags and Negative Constraints -->
      <div class="form-grid-2">
        <div class="form-field">
          <label for="hashtags" class="form-label">
            <span data-translate="Hashtags">Hashtags</span>
          </label>
          <input
            type="text"
            id="hashtags"
            class="form-input"
            placeholder="e.g. #DigitalMarketing #OnlineBusiness"
            data-placeholder="e.g. #DigitalMarketing #OnlineBusiness"
          />
          <small style="color: #9ca3af; font-size: 0.75rem">You can add the hashtags.</small>
        </div>
        <div class="form-field">
          <label for="negative-constraints" class="form-label">
            <span data-translate="Negative Constraints">Negative Constraints</span>
          </label>
          <input
            type="text"
            id="negative-constraints"
            class="form-input"
            placeholder="e.g. Do not mention price, avoid offensive words"
            data-placeholder="e.g. Do not mention price, avoid offensive words"
          />
          <small style="color: #9ca3af; font-size: 0.75rem"
            >Things that content should not include.</small
          >
        </div>
      </div>

      <!-- Hidden fields for keywords and CTA (kept for backward compatibility) -->
      <input type="hidden" id="keywords" value="" />
      <input type="hidden" id="cta" value="" />

      <!-- Emoji Toggle Section -->
      <div class="flex justify-center">
        <div class="emoji-toggle-container" style="max-width: 700px; width: 100%">
          <label class="emoji-toggle-label" data-translate="Include Emojis">Include Emojis</label>
          <label class="toggle-switch">
            <input type="checkbox" id="emoji-toggle" checked />
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Generate Button -->
      <div class="flex justify-center">
        <button id="generate-btn" class="generate-button" style="max-width: 700px; width: 100%">
          <svg
            class="animate-spin h-5 w-5 text-white hidden"
            id="generate-spinner"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          <!-- Lucide Wand icon (same as Generator in header) -->
          <svg
            id="generate-wand-icon"
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 mr-2"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"
            />
            <path d="m14 7 3 3" />
            <path d="M5 6v4" />
            <path d="M19 14v4" />
            <path d="M10 2v2" />
            <path d="M7 8H3" />
            <path d="M21 16h-4" />
            <path d="M11 3H9" />
          </svg>
          <span id="generate-btn-text" data-translate="Generate Content">Generate Content</span>
        </button>
      </div>
    </div>

    <!-- Generated Content Section -->
    <div class="generated-content-container">
      <h2 class="generated-content-title" data-translate="Generated Content">Generated Content</h2>
      <p
        class="generated-content-subtitle"
        data-translate="Review and edit your generated content here."
      >
        Review and edit your generated content here.
      </p>

      <div id="generated-content-display" class="generated-content-area">
        <svg
          class="empty-state-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
          />
        </svg>
        <p class="empty-state-text" data-translate="Fill out the form to generate your content.">
          Fill out the form to generate your content.
        </p>
        <p class="empty-state-subtext" data-translate="Your content will appear here.">
          Your content will appear here.
        </p>
      </div>

      <!-- Loading Animation (inside content area) -->
      <div
        id="loading-overlay"
        class="loading-overlay"
        style="
          display: none;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.9);
          border-radius: 1rem;
          justify-content: center;
          align-items: center;
          flex-direction: column;
          z-index: 10;
        "
      >
        <div class="loading-indicator">
          <div class="loading-circle-wrapper">
            <svg class="loading-circle" viewBox="0 0 128 128">
              <circle
                class="loading-progress-bg"
                cx="64"
                cy="64"
                r="54"
                stroke-width="8"
                fill="none"
              ></circle>
              <circle
                id="loading-progress-ring"
                class="loading-progress-ring"
                cx="64"
                cy="64"
                r="54"
                stroke-width="8"
                fill="none"
                stroke-linecap="round"
              ></circle>
              <defs>
                <linearGradient id="loading-progress-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#dc2626" />
                  <stop offset="50%" stop-color="#ef4444" />
                  <stop offset="100%" stop-color="#dc2626" />
                </linearGradient>
              </defs>
            </svg>
            <div class="loading-circle-glow"></div>
            <div class="loading-circle-content">
              <svg
                class="loading-zap-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
              <span id="loading-progress-text">0%</span>
            </div>
          </div>
          <div class="loading-message">
            <p
              id="loading-message-text"
              class="loading-message-text"
              data-translate="Generating your content..."
            >
              Generating your content...
            </p>
            <div class="loading-dots" aria-hidden="true">
              <span style="animation-delay: 0ms"></span>
              <span style="animation-delay: 150ms"></span>
              <span style="animation-delay: 300ms"></span>
            </div>
          </div>
        </div>
      </div>

      <textarea
        id="content-area"
        rows="10"
        style="
          display: none;
          width: 100%;
          padding: 1rem;
          background-color: #ffffff;
          color: #000000;
          border: 1px solid #d1d5db;
          border-radius: 0.5rem;
          margin-top: 1rem;
        "
        placeholder="Generated content will appear here..."
        data-placeholder="Generated content will appear here..."
      ></textarea>

      <!-- Save Content & Copy Buttons -->
      <div class="mt-6 flex gap-4 justify-center">
        <!-- Copy Button -->
        <button
          id="copy-content-btn"
          class="copy-btn flex items-center justify-center space-x-2 px-6 py-3 bg-white border-2 border-red-500 rounded-2xl transition-all duration-200 font-medium w-[140px]"
          style="display: none"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="copy-icon h-5 w-5 transition-colors duration-200 flex-shrink-0"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            style="color: #ef4444"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
            />
          </svg>
          <span
            class="copy-text text-base transition-colors duration-200"
            data-translate="Copy"
            style="color: #ef4444"
            >Copy</span
          >
        </button>

        <!-- Save Content Button -->
        <button
          id="save-content-btn"
          class="save-btn flex items-center justify-center space-x-2 px-6 py-3 bg-white border-2 border-red-500 rounded-2xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed w-[140px]"
          style="display: none"
          disabled
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="save-icon h-5 w-5 transition-colors duration-200 flex-shrink-0"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
            style="color: #ef4444"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"
            />
          </svg>
          <span
            class="save-text text-base transition-colors duration-200"
            data-translate="Save"
            style="color: #ef4444"
            >Save</span
          >
        </button>
      </div>
    </div>
  </div>
</div>

<!-- API Key Modal -->
<div id="api-key-modal" class="api-key-modal" aria-hidden="true">
  <div
    class="api-key-modal-content"
    role="dialog"
    aria-modal="true"
    aria-labelledby="api-key-modal-title"
  >
    <button type="button" class="api-key-modal-close" id="close-api-key-modal" aria-label="Close">
      &times;
    </button>
    <h3 id="api-key-modal-title" data-translate="API Key">API Key</h3>
    <p
      class="api-key-modal-description"
      data-translate="Update the Gemini API key you want to use on this generator."
    >
      Update the Gemini API key you want to use on this generator.
    </p>
    <input
      type="text"
      id="api-key-input"
      class="api-key-input"
      placeholder="Enter your Gemini API key"
      data-placeholder="Enter your Gemini API key"
    />
    <div class="api-key-modal-actions">
      <button
        type="button"
        class="api-key-btn secondary"
        id="api-key-cancel-btn"
        data-translate="Cancel"
      >
        Cancel
      </button>
      <button
        type="button"
        class="api-key-btn primary"
        id="api-key-submit-btn"
        data-translate="Change"
        data-default-text="Change"
        data-myanmar-text="ပြောင်းရန်"
      >
        Change
      </button>
    </div>
  </div>
</div>

{% endblock %}
